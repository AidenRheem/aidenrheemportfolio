import{t as L,a as _}from"../chunks/OA5hDYqi.js";import{i as K}from"../chunks/BOzniV7d.js";import{p as P,o as X,g as s,l as Q,a as R,t as w,b as V,m as b,c as n,s as p,r as o,n as Z,d as m}from"../chunks/46PHf2lK.js";import{s as q}from"../chunks/BmC-ciwT.js";import{e as O,i as z}from"../chunks/CllbdEkA.js";import{s as y}from"../chunks/CautmLz1.js";import{s as ee}from"../chunks/CiHQZm9d.js";var te=L('<a target="_blank" rel="noopener noreferrer" class="track-card svelte-bymdcy"><div class="track-overlay-text svelte-bymdcy"><p class="track-name krypton svelte-bymdcy"> </p></div> <div class="track-overlay svelte-bymdcy"></div> <img class="track-image svelte-bymdcy"></a>'),ae=L('<a target="_blank" rel="noopener noreferrer" class="track-card svelte-bymdcy"><div class="track-overlay-text svelte-bymdcy"><p class="track-name krypton svelte-bymdcy"> </p></div> <div class="track-overlay svelte-bymdcy"></div> <img class="track-image svelte-bymdcy"></a>'),se=L('<div class="min-h-screen flex items-center justify-center"><div class="container max-w-screen-sm border border-overlay2 p-18 relative bg-black/50 backdrop-blur-sm text-[#28282B]"><div class="flex items-center justify-center pb-6"><div class="absolute top-2 left-6 flex items-center text-3xl group hover:text-[#dbdbde]"><a class="moonhouse text-[#a6a6ad] group-hover:text-[#dbdbde]" href="/">a</a> <a class="moonhouse group-hover:text-[#dbdbde]" href="/">.</a></div> <div class="absolute top-4.75 right-6 flex items-center"><span class="krypton text-sm text-[#a6a6ad]" style="margin-left: -2px;"><a href="/projects" class="underline text-[#a6a6ad] hover:text-[#dbdbde]">1.</a> <a href="/socials" class="underline text-[#a6a6ad] hover:text-[#dbdbde]">2.</a> <a href="/music" class="underline text-[#a6a6ad] hover:text-[#dbdbde]">3.</a> <a href="/blog" class="underline text-[#a6a6ad] hover:text-[#dbdbde]">4.</a></span></div></div> <div class="container max-w-screen-sm border border-overlay2 p-2 text-[#28282B]"><div class="container max-w-screen-sm border border-overlay2 p-2 text-[#28282B]"><div class="flex items-center justify-between mb-2"><div class="flex items-end gap-2"><span class="text-lg font-medium text-[#dbdbde] krypton">Top tracks</span> <span class="text-sm mb-2 font-medium text-[#54545c] krypton">(4 weeks)</span></div></div> <div class="tracks-slider svelte-bymdcy"></div></div> <div class="container max-w-screen-sm border border-overlay2 p-2 mt-4 text-[#28282B]"><div class="flex items-center justify-between mb-2"><div class="flex items-end gap-2"><span class="text-lg font-medium text-[#dbdbde] krypton">Top artists</span> <span class="text-sm mb-2 font-medium text-[#54545c] krypton">(4 weeks)</span></div></div> <div class="tracks-slider svelte-bymdcy"></div></div></div></div></div>');function me(M,N){P(N,!1);let x=null,v=b("");function E(){const a=new Date,e=a.getTime(),t=a.getTimezoneOffset()*6e4,i=e+t+36e5*2;new Date(i).toLocaleTimeString()}const T=async()=>{try{const e=await(await fetch("https://api.lanyard.rest/v1/users/883816535033020416")).json();x=e.data.spotify,m(v,e.data.discord_status)}catch(a){console.error("Error fetching Spotify data:",a),x=null}};let f=b("#a6a6ad"),j=b([]),D=b([]);const I="robdot";async function W(){try{const a=await fetch(`https://beta-api.stats.fm/api/v1/users/${I}/top/tracks?limit=1&range=weeks`);if(!a.ok)throw new Error("Faild to fetch top tracks");const e=await a.json();m(j,e.items.map(t=>({name:t.track.name,artist:t.track.artists.map(r=>r.name).join(", "),position:t.position,imageUrl:t.track.albums[0].image,albumName:t.track.albums[0].name,url:t.track.externalIds.spotify&&t.track.externalIds.spotify.length>0?`https://open.spotify.com/track/${t.track.externalIds.spotify[0]}`:"#"})))}catch(a){console.error("Error fetching top tracks, see ",a)}}async function Y(){try{const a=await fetch(`https://beta-api.stats.fm/api/v1/users/${I}/top/artists?limit=50&range=weeks`);if(!a.ok)throw new Error("Failed to fetch top artists");const e=await a.json();m(D,e.items.map(t=>{var r;return{artist:t.artist,url:(r=t.artist.externalIds.spotify)!=null&&r[0]?`https://open.spotify.com/artist/${t.artist.externalIds.spotify[0]}`:"#"}}))}catch(a){console.error("Error fetching top artists:",a)}}X(()=>{E();const a=setInterval(E,1e3);T();const e=setInterval(T,1e4);return W(),Y(),()=>{clearInterval(a),clearInterval(e)}}),console.log(s(f),s(v),x),X(()=>{document.querySelectorAll(".tracks-slider").forEach(e=>{let t=!1,r=0,l=0;const i=e,d=c=>{t=!0,e.classList.add("active"),r=c.pageX-i.offsetLeft,l=i.scrollLeft},u=()=>{t=!1,e.classList.remove("active")},U=c=>{if(!t)return;c.preventDefault();const J=(c.pageX-i.offsetLeft-r)*2;i.scrollLeft=l-J},H=c=>{c.preventDefault(),i.scrollLeft+=c.deltaY};e.addEventListener("mousedown",d),e.addEventListener("mouseleave",u),e.addEventListener("mouseup",u),e.addEventListener("mousemove",U),e.addEventListener("wheel",H),e.querySelectorAll(".track-card").forEach(c=>{c.addEventListener("mousedown",d),c.addEventListener("mousemove",U),c.addEventListener("mouseup",u),c.addEventListener("mouseleave",u)})})}),Q(()=>s(v),()=>{s(v)==="offline"?m(f,"#a6a6ad"):s(v)==="dnd"?m(f,"#812e25"):s(v)==="idle"?m(f,"#f79c18"):s(v)==="online"&&m(f,"#4f8832")}),R(),K();var h=se(),$=n(h),g=n($),S=n(g),G=p(n(S),2);o(S),Z(2),o(g);var A=p(g,2),k=n(A),B=p(n(k),2);O(B,5,()=>s(j),z,(a,e)=>{var t=te(),r=n(t),l=n(r),i=n(l);o(l),o(r);var d=p(r,4);o(t),w(()=>{y(t,"href",s(e).url),q(i,`${s(e).position??""}. ${s(e).name??""}`),y(d,"src",s(e).imageUrl),y(d,"alt",s(e).name)}),_(a,t)}),o(B),o(k);var C=p(k,2),F=p(n(C),2);O(F,5,()=>s(D),z,(a,e)=>{var t=ae(),r=n(t),l=n(r),i=n(l,!0);o(l),o(r);var d=p(r,4);o(t),w(()=>{y(t,"href",s(e).url),q(i,s(e).artist.name),y(d,"src",s(e).artist.image),y(d,"alt",s(e).artist.name)}),_(a,t)}),o(F),o(C),o(A),o($),o(h),w(()=>ee(G,`margin-left: -4.5px; color: ${s(f)??""};`)),_(M,h),V()}export{me as component};
